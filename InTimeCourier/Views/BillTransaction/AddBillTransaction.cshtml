@model InTimeCourier.Models.BillTransaction
@{
    Layout = null;
}
@using (Html.BeginForm())
{
    <div class="form-group col-lg-6">
        @Html.HiddenFor(model => model.TransactionId)
        <select id="ddlPartyName" class="form-control"></select>
    </div>
    <div class="form-group col-lg-6">
        <select id="ddlFinancialYear" class="form-control"></select>
    </div>
    <div class="form-group col-lg-6">
        <input type="text" class="form-control" id="txtTransactionDate" placeholder="Transaction Date" />
    </div>
    <div class="col-lg-6">
        <input type="text" class="form-control" id="txtCreditAmount" placeholder="Credit Amount" />
    </div>
    <div class="form-group col-lg-12">
        <textarea id="txtNarration" class="form-control" placeholder="Transaction Narration"></textarea>
    </div>

    <div class="form-group col-lg-6">
        <input type="submit" class="btn btn-success" value="Save Transaction">
    </div>
}
@section Scripts {

    <script>
        $(document).ready(function () {
            $.ajax({
                url: "/BillTransaction/GetAllPartyAndFinancialYear",

                type: "GET",
                dataType: "json",
                success: function (data) {
                    $('#ddlPartyName').find('option').remove();
                    $('#ddlFinancialYear').find('option').remove();
                    $('#ddlPartyName').append($('<option></option>').val('').html('--Select Party--'));
                    $('#ddlFinancialYear').append($('<option></option>').val('').html('--Select Financial Year--'));

                    $(data?.parties).each(function (index, item) { // GETTING ERROR HERE
                        $('#ddlPartyName').append($('<option></option>').val(item.PartyId).html(item.PartyName));
                    });
                    $(data?.financialYears).each(function (index, item) { // GETTING ERROR HERE
                        $('#ddlFinancialYear').append($('<option></option>').val(item.FYearId).html(item.FYear));
                    });
                },
                error: function ajaxError(response) {
                    console.log(response.status + ' ' + response.statusText);
                }
            });
        })
    </script>
}